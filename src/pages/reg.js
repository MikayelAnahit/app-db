const fs=require("fs"),push_to_db=require("./components/push_to_db"),register_btn=document.querySelector(".register_btn");function create_user(e,t,r,o){const n={login:e,name:o,pass:t,office_id:r,owner:!1,admin:!1,pay:0,sacm_pay:0,broker_pay:0,loads:[],save:!0},u=`./src/local_db/user_${e}.json`,l=JSON.stringify(n,null,2);fs.writeFile(u,l,(t=>{t?console.log(`Error : ${t}`):console.log(`Created : ${u}`),push_to_db(e)})),clear_input(".reg_login"),clear_input(".reg_input"),clear_input(".pass_input"),clear_input(".id_input"),start_loader(!1),setTimeout((()=>{window.location.href="../index.html"}),2e3),start_loader(!0)}function clear_input(e){document.querySelector(e).value=""}function start_loader(e){document.querySelector(".loader").style.display=0==e?"flex":"none"}register_btn.addEventListener("click",(()=>{const e=document.querySelector(".reg_login").value,t=document.querySelector(".reg_input").value,r=document.querySelector(".pass_input").value,o=document.querySelector(".id_input").value;start_loader(!1),create_user(e,r,o,t)})),start_loader(!0);